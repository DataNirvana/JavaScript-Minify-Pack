<!-- https://github.com/evanw/packer -->
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,  initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>JaMiPa - Minify and pack JavaScript</title>
	<meta property="og:title" content="Data Visualisation" />
	<meta property="og:site_name" content="https://datanirvana.github.io/JavaScript-Minify-Pack/Packer.html" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://datanirvana.github.io/JavaScript-Minify-Pack/Packer.html" />
	<meta property="og:image" content="https://visualise.datanirvana.org/Images/DataNirvana_D_Text_Small.png" />
	<meta property="og:description" content="Minify and pack JavaScript - the combination creates the smallest packages" />
	<link rel="shortcut icon" href="favicon.ico" />

	<link href="Styles/Site.min.css?v=3213" rel="stylesheet" type="text/css" />
	<link href="Styles/Vis.min.css?v=3213" rel="stylesheet" type="text/css" charset='utf-8' />

	<script src="Scripts/Packer.js" type="text/javascript"></script>

	<script type="text/javascript">
		//-----
		function DoStep1() {
			// Get a handle on the form in the IFrame
			let myIF = document.getElementById("Step1Frame");
			let myIFDoc = (myIF.contentWindow || myIF.contentDocument);
			if (myIFDoc.document) myIFDoc = myIFDoc.document;

			// Run the form
			myIFDoc.forms[0].submit();

		}

		//-----
		function DoPack() {

			// Pack the output of the minified code
			let output = packer.pack(document.getElementById("Input").value, true, true);

			// Set it to the output window
			document.getElementById("Output").value = output;

			// Update the number of characters
			document.getElementById("Char3").innerText = document.getElementById("Output").value.length;

		}

	</script>
</head>
	<body>
		<div class="BodyInfoWrapper BodyInfoWrapperClean">
			<div class="BodyInfoContentWide">
				<h2>JaMiPa - Javascript minifier and packer</h2>
				Minifies javascript files by running the scripts through Google's <a href="https://closure-compiler.appspot.com/home">closure-compiler.appspot.com/home</a> to clean and minify them.
				This should result in smaller files which are then packed using Dean Edward's packer.  This should further reduce the file size and obfuscate the code.

				<h3>Step 1 - Minify</h3>
				<div>Add your code in the box below and <a href="javaScript: DoStep1();"><b>DoStep1</b></a></div>

				<iframe id="Step1Frame" width="1100" height="200" src="Step1.html"> </iframe>


				<h3>Step 2 - copy paste</h3>
				<div>Paste the output of the minification above into this textbox below</div>

				<textarea id="Input" name="js_code" type="text" rows="11" cols="154" style="border-color:#dddddd;"></textarea>
				<div>Number of characters <span id="Char2">0</span></div>


				<h3>Step 3 - Pack</h3>
				<div><a href="javaScript: DoPack();"><b>Pack it</b></a> and then collect your output here</div>
				<textarea id="Output" type="text" rows="11" cols="154" style="border-color:#dddddd;"></textarea>
				<div>Number of characters <span id="Char3">0</span></div>
				<br><br>
				<br /><br />
			</div>
		</div>

		<input type="hidden" name="compilation_level" value="SIMPLE_OPTIMIZATIONS">
		<input type="hidden" name="output_format" value="text">
		<input type="hidden" name="output_info" value="compiled_code">



		<script type="text/javascript">
			// Wire up the two text boxes so that the length of the text is automatically included below them
			document.addEventListener("DOMContentLoaded", function () {

				let tb2 = document.getElementById("Input");
				tb2.onchange = function () {

					document.getElementById("Char2").innerText = this.value.length;
				};

				let tb3 = document.getElementById("Output");
				tb3.onchange = function () {

					document.getElementById("Char3").innerText = this.value.length;
				};

			});

		</script>

</body >
</html >